<html>
  <head>
    <meta charset="UTF-8" />
    <style>
    .progress {
      width: 100%;
      height: 40px;
      background-color: lightgray;
      margin: 8px 0;
    }

    .progress-bar {
      width: 1%;
      height: 40px;
      background-color: blue;
    }
    </style>
  </head>
  <body>
    <h1>progress bar!</h1>
    <div>
      <div class="progress"><div id="bar1" class="progress-bar"></div></div>
      <button class="start-btn" onclick="start('bar1', this)">Start 1</button>
    </div>

    <div>
      <div class="progress"><div id="bar2" class="progress-bar"></div></div>
      <button class="start-btn" onclick="start('bar2', this)">Start 2</button>
    </div>

    <div>
      <div class="progress"><div id="bar3" class="progress-bar"></div></div>
      <button class="start-btn" onclick="start('bar3', this)">Start 3</button>
    </div>

    <script>
      function start(elementId, self) {
        let initWidth = 0;
        const element = document.getElementById(elementId);
        const interval = setInterval(() => {
          initWidth++;
          increase(element, initWidth);
        }, 20);

        // Stop button
        let btn = document.getElementById(elementId + 'btn');
        if (btn) {
          btn.remove();
        }
        btn = document.createElement('button');
        btn.innerText = 'stop';
        btn.id = elementId + 'btn';
        btn.onclick = () => stop(interval);
        self.parentNode.appendChild(btn);
      }

      function stop(interval) {
        clearInterval(interval);
      }

      function increase(element, width) {
        if (width > 100) {
          stop();
        }
        if (element && element.style) {
          element.style.width = `${width}%`;
        }
      }
    </script>
  </body>
</html>
